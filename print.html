<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Noir programming language book</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="Book for Noir programming language">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="00-01-introduction.html">The Noir Programming Language</a></li><li class="chapter-item expanded "><a href="01-00-getting-started.html"><strong aria-hidden="true">1.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="01-01-installation.html"><strong aria-hidden="true">1.1.</strong> Installation</a></li><li class="chapter-item expanded "><a href="01-02-hello-world.html"><strong aria-hidden="true">1.2.</strong> Hello, World!</a></li><li class="chapter-item expanded "><a href="01-03-project-breakdown.html"><strong aria-hidden="true">1.3.</strong> Project breakdown</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Noir programming language book</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<h2 id="what-is-noir"><a class="header" href="#what-is-noir">What is Noir?</a></h2>
<p>Noir is a fully open-source language for private, succinctly provable programs.. It's design choices are influenced heavily by Rust.</p>
<p>Noir is flexible in its design, as it does not compile immediately to a fixed NP-complete language. Instead, Noir compiles to an intermediate language (ACIR), which itself can be compiled to an arithmetic circuit (if choosing to target Aztec's barretenberg backend) or a rank-1 constraint system (if choosing to target an R1CS backend like Arkwork's Marlin backend, or others)</p>
<h2 id="what-can-you-do-with-noir"><a class="header" href="#what-can-you-do-with-noir">What can you do with Noir?</a></h2>
<ul>
<li>
<p>First of course Noir can be used to write program which can be compiled to an intermediate language (ACIR), which itself can be compiled to an arithmetic circuit (if choosing to target Aztec's barretenberg backend), or a rank-1 constraint system (if choosing to target an R1CS backend like Arkwork's Marlin backend, or others)</p>
</li>
<li>
<p>Noir currently includes a command to publish a Solidity contract which verifies your Noir program.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="getting-started"><a class="header" href="#getting-started">Getting Started</a></h1>
<p>We’ll discuss:</p>
<ul>
<li>Installing <code>nargo</code>, a command line tool for interacting with Noir programs (e.g. compiling, proving, verifying and more)</li>
<li>Writing a program that proves knowledge of a preimage of a hash function</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="installation"><a class="header" href="#installation">Installation</a></h1>
<p>If you're on OSX or Linux, the easiest way to start using Noir and Nargo is via noirup. Just open a terminal and run:</p>
<pre><code class="language-bash">curl -L https://raw.githubusercontent.com/noir-lang/noirup/main/install | bash
</code></pre>
<p>Close the terminal, open another one, and run</p>
<pre><code class="language-bash">noirup
</code></pre>
<p>Done, you should have the latest version working. You can check with <code>nargo --version</code>.</p>
<p>Nightly versions
To install the nightly version of Noir (updated daily) run:</p>
<pre><code class="language-bash">noirup -n
</code></pre>
<p>For other options of installation, see details at <a href="https://noir-lang.org/getting_started/nargo_installation">noir-lang.org</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="hello-world"><a class="header" href="#hello-world">Hello, World!</a></h1>
<p>Now you have Noir installed, let's write a simple program to test it out.</p>
<h2 id="creating-new-projects"><a class="header" href="#creating-new-projects">Creating new projects</a></h2>
<p>Open a terminal and enter the following commands to make a projects directory and a directory for our “Hello, world!” project within the projects directory.</p>
<p>For Linux, macOS, and PowerShell on Windows, enter this:</p>
<pre><code class="language-bash">mkdir ~/projects
cd ~/projects
mkdir hello_world
cd hello_world
</code></pre>
<h2 id="writing-a-noir-program"><a class="header" href="#writing-a-noir-program">Writing a Noir program</a></h2>
<p>Now open the <code>main.nr</code> file you just created and enter the code in Listing 1-1.</p>
<p>Filename: main.nr</p>
<pre><pre class="playground"><code class="language-rust">use dep::std;

fn main(hash : pub Field, pre_image : Field) {
    let hash_of_pre_image = std::hash::pedersen([pre_image])[0];
    assert(hash == hash_of_pre_image);
}</code></pre></pre>
<p>Listing 1-1: A program that proves knowledge of a preimage of a hash function</p>
<p>The purpose of this program is (the Prover) to prove knowledge of a preimage of a hash function.</p>
<ul>
<li>
<p>The Prover would run the program which takes two arguments, a hash and a preimage. It hashes the preimage and checks that the hash matches the given hash and generates a proof.</p>
</li>
<li>
<p>The Verifier can verify the correct execution of our Noir program by verifying the proof generated by the Prover.</p>
</li>
</ul>
<h2 id="build-inputoutput-files"><a class="header" href="#build-inputoutput-files">Build input/output files</a></h2>
<p>Next step, Build in/output files for your Noir program by running:</p>
<pre><code class="language-bash">nargo check
</code></pre>
<p>Two additional files would be generated in your project directory:</p>
<ul>
<li>
<p><code>Prover.toml</code> containts input values known to the Prover,</p>
</li>
<li>
<p><code>Verifier.toml</code> contains public values shown to the Verifier.</p>
</li>
</ul>
<p>Fill up the <code>Prover.toml</code> file with the following values:</p>
<pre><code class="language-toml">hash = &quot;0x03fdabb754f4f499c12406532fc924264db1b70702888a191683157056334d61&quot;
pre_image = &quot;0&quot;
</code></pre>
<p>The <code>Verifier.toml</code> file should contain only the hash value:</p>
<pre><code class="language-toml">hash = &quot;0x03fdabb754f4f499c12406532fc924264db1b70702888a191683157056334d61&quot;
</code></pre>
<h2 id="prove-our-noir-program"><a class="header" href="#prove-our-noir-program">Prove our Noir program</a></h2>
<p>Prove the valid execution of our Noir program with your preferred proof name, for example <code>p</code>:</p>
<pre><code class="language-bash">nargo prove p
</code></pre>
<p>A new folder <code>proofs</code> would then be generated in your project directory, containing the proof file <code>p.proof</code>.</p>
<h2 id="verify-our-noir-program"><a class="header" href="#verify-our-noir-program">Verify our Noir program</a></h2>
<p>Once a proof is generated, we can verify correct execution of our Noir program by verifying the proof file, by running:</p>
<pre><code class="language-bash">nargo verify p
</code></pre>
<p>If the verification complete successfully the Termial won't show any information. If it fails, it will log the corresponding error instead.</p>
<h1 id="summary"><a class="header" href="#summary">Summary</a></h1>
<p>You have successfully written, proved and verified your first Noir program! Let's recap what we have learned:</p>
<ul>
<li>
<p>Install Noir and Nargo using noirup</p>
</li>
<li>
<p>Create a new Noir project</p>
</li>
<li>
<p>Write a first Noir program</p>
</li>
<li>
<p>Build input/output files which used by our Noir program</p>
</li>
<li>
<p>Prove and verify our Noir program using Nargo CLI</p>
</li>
</ul>
<p>In the next chapter, we will break down the program we just wrote and explain what each part does in detail.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="project-breakdown"><a class="header" href="#project-breakdown">Project breakdown</a></h1>
<p>After <code>nargo new</code> and <code>cargo check</code>, you should have a minimal Nargo project that looks like this:</p>
<pre><code>├── Nargo.toml
├── Prover.toml
├── Verifier.toml
└── src
    └── main.nr
</code></pre>
<h2 id="nargotoml"><a class="header" href="#nargotoml">Nargo.toml</a></h2>
<p>Contains environmental options of the project</p>
<ul>
<li>Defines the compiler version</li>
</ul>
<p>For example:</p>
<pre><code>compiler_version = &quot;0.8.0&quot;
</code></pre>
<ul>
<li>The project we created did not require any dependency, but as project grow, we would need a way to manage dependencies. Nargo.toml is the place to do that.</li>
</ul>
<p>For example, to add the ecrecover-noir library to your project, add it to <code>Nargo.toml</code>:</p>
<pre><code class="language-toml"># Nargo.toml

[dependencies]
ecrecover = {tag = &quot;v0.2.0&quot;, git = &quot;https://github.com/colinnielsen/ecrecover-noir&quot;}
# Specifying a dependency requires a tag to a specific commit and the git url to the url containing the package
</code></pre>
<ul>
<li>It's also possible to specify dependencies that are local</li>
</ul>
<p>For example, this file structure has a library and binary crate</p>
<pre><code>├── binary_crate
│   ├── Nargo.toml
│   └── src
│       └── main.nr
└── liba
    ├── Nargo.toml
    └── src
        └── lib.nr
</code></pre>
<p>Inside of the binary crate, you can specify:</p>
<pre><code># Nargo.toml

[dependencies]
libA = { path = &quot;../liba&quot; }
</code></pre>
<ul>
<li></li>
</ul>
<h2 id="mainnr"><a class="header" href="#mainnr">main.nr</a></h2>
<p>The <code>main.nr</code> file contains a main function, this is the entry point into your Noir program.</p>
<p>This is the function main in our sample program</p>
<pre><pre class="playground"><code class="language-rust">fn main(hash : pub Field, pre_image : Field) {
    let hash_of_pre_image = std::hash::pedersen([pre_image])[0];
    assert(hash == hash_of_pre_image);
}</code></pre></pre>
<ul>
<li>
<p>The parameters <code>hash</code> and <code>pre_image</code> can be seen as the API for the program and must be supplied by the prover, in the Prover.toml file.</p>
</li>
<li>
<p>Since <code>hash</code> is marked as public, the verifier is supplied its value verifying the proof.</p>
</li>
<li>
<p>The constrain here is to ensures the satisfaction of the condition (hash_of_pre_image == pedersen(pre_image)[0]), the verifier would reject otherwise.</p>
</li>
</ul>
<h2 id="provertoml"><a class="header" href="#provertoml">Prover.toml</a></h2>
<p>The Prover.toml file is a file which the prover uses to supply the witness values(both private and public).</p>
<p>For example, the Prover.toml file for our sample program would look like this:</p>
<pre><code class="language-toml">hash = &quot;0x03fdabb754f4f499c12406532fc924264db1b70702888a191683157056334d61&quot;
pre_image = &quot;0&quot;
</code></pre>
<p>When the command `nargo prove p`` is executed, two processes happen:</p>
<ul>
<li>
<p>Noir creates a proof that <code>hash</code> = &quot;0x03fdabb754f4f499c12406532fc924264db1b70702888a191683157056334d61&quot; and <code>pre_image</code> = &quot;0&quot; and <code>pedersen(pre_image)[0]</code> = <code>hash</code>, without revealing the value of <code>pre_image</code>.</p>
</li>
<li>
<p>Noir creates and stores the proof of this statement in the proofs directory and names the proof file p, in hex format.</p>
</li>
</ul>
<h2 id="verifiertoml"><a class="header" href="#verifiertoml">Verifier.toml</a></h2>
<p>Contains the public values that the verifier uses to verify the proof.</p>
<p>For example, the Verifier.toml file for our sample program would look like this:</p>
<pre><code class="language-toml">hash = &quot;0x03fdabb754f4f499c12406532fc924264db1b70702888a191683157056334d61&quot;
</code></pre>
<h2 id="verifying-a-proof"><a class="header" href="#verifying-a-proof">Verifying a Proof</a></h2>
<p>When the command `nargo verify p`` is executed, two processes happen:</p>
<ul>
<li>
<p>Noir checks in the proofs directory for a file called p</p>
</li>
<li>
<p>If that file is found, the proof's validity is checked, with the corresponding Prover.toml and Verifier.toml files.</p>
</li>
</ul>
<blockquote>
<p>Note: The validity of the proof is linked to the current Noir program; if the program is changed and the verifier verifies the proof, it will fail because the proof is not valid for the modified Noir program.</p>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
